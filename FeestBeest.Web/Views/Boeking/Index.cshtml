@model BoekingIndexViewModel

<div class="w-full py-4 min-h-screen">
    <!-- Stappenindicator -->
    <div class="flex justify-center items-center space-x-32 mb-4">
        @foreach (var step in new[] { "Beestjes", "Gegevens", "Bevestig" })
        {
            var isCurrent = step == "Beestjes" || step == "Gegevens";
            var isCompleted = step == "Beestjes";
            <div class="relative flex flex-col items-center">
                <div class="w-8 h-8 @((isCompleted || isCurrent) ? "bg-blue-500" : "bg-gray-300") rounded-full flex items-center justify-center text-white font-bold">
                    @(Array.IndexOf(new[] { "Beestjes", "Gegevens", "Bevestig" }, step) + 1)
                </div>
                <span class="text-sm mt-2">@step</span>
                @if (step != "Bevestig")
                {
                    <div class="absolute top-1/2 transform -translate-y-1/2 w-full h-1 @((isCompleted || isCurrent) ? "bg-blue-500" : "bg-gray-300")"></div>
                }
            </div>
        }
    </div>

    <div class="flex justify-between items-start mt-4">
        <!-- Linkerzijde: Beestjes selecteren -->
        <div class="w-3/4">
            <h3>Stap 1: Selecteer de beestjes die je wilt boeken:</h3>
            <form asp-controller="Boeking" asp-action="Index" method="post">
                <input type="hidden" name="SelectedDate" value="@Model.SelectedDate.ToString("yyyy-MM-dd")" />
                <div class="grid grid-cols-6 gap-4">
                    @foreach (var beestje in Model.Beestjes)
                    {
                        <div class="bg-white border border-gray-200 rounded-lg shadow-lg p-4" id="beestje-@beestje.Id">
                            <img src="~/Img/Beestjes/@beestje.Afbeelding" class="h-32 w-full object-contain mb-4" />
                            <div class="text-lg font-bold mb-2">@beestje.Naam</div>
                            <div class="text-gray-700 mb-4">@beestje.Type</div>
                            <div class="text-gray-900 font-semibold mb-4">€@beestje.Prijs</div>
                            <div class="flex justify-center">
                                <label class="flex items-center cursor-pointer">
                                    <input type="checkbox" name="SelectedBeestjesIds" value="@beestje.Id" class="form-checkbox h-5 w-5 text-blue-600 mr-2" data-id="@beestje.Id" data-naam="@beestje.Naam" data-prijs="@beestje.Prijs" data-afbeelding="@Url.Content("~/Img/Beestjes/" + beestje.Afbeelding)" />
                                    <span>Selecteer</span>
                                </label>
                            </div>
                        </div>
                    }
                </div>
                <div class="flex justify-end items-end mt-4">
                    <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-4 px-8 rounded text-xl">
                        Volgende stap
                    </button>
                </div>
            </form>
        </div>

        <!-- Rechterzijde: Geselecteerde details -->
        <div class="w-1/4 bg-white border border-gray-200 rounded-lg shadow-lg p-4 ml-12">
            <h3 class="text-lg font-bold mb-4">Geselecteerde Gegevens</h3>
            <p><strong>Datum:</strong> @Model.SelectedDate.ToShortDateString()</p>
            <h4 class="text-md font-semibold mt-4">Geselecteerde Beestjes:</h4>
            <ul id="selected-beestjes-list" class="list-disc list-inside"></ul>
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const checkboxes = document.querySelectorAll("input[name='SelectedBeestjesIds']");
        const selectedBeestjesList = document.getElementById("selected-beestjes-list");

        checkboxes.forEach(checkbox => {
            checkbox.addEventListener("change", () => {
                const beestjeId = checkbox.getAttribute("data-id");
                const naam = checkbox.getAttribute("data-naam");
                const prijs = checkbox.getAttribute("data-prijs");
                const afbeelding = checkbox.getAttribute("data-afbeelding");

                if (checkbox.checked) {
                    // Beestje toevoegen aan de lijst
                    const listItem = document.createElement("li");
                    listItem.setAttribute("data-id", beestjeId);
                    listItem.className = "flex items-center mb-2";
                    listItem.innerHTML = `
                        <img src="${afbeelding}" class="h-10 w-10 object-contain mr-2" />
                        <span>${naam} - €${prijs}</span>
                    `;
                    selectedBeestjesList.appendChild(listItem);
                } else {
                    // Beestje verwijderen uit de lijst
                    const listItem = selectedBeestjesList.querySelector(`li[data-id='${beestjeId}']`);
                    if (listItem) {
                        listItem.remove();
                    }
                }
            });
        });
    });
</script>
